<!-- analisis/templates/analisis/lista.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Lista de textos</title>
</head>
<body>
    <h1>Textos subidos</h1>

    {% if textos %}
        <ul>
            {% for texto in textos %}
                <li>{{ texto }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No hay textos todavía.</p>
    {% endif %}

    <a href="{% url 'subir_texto' %}">Subir nuevo texto</a>

    <h2>Textos subidos</h2>
{% for texto in textos %}
    <h3>{{ texto.titulo }}</h3>
    <ul>
        {% for palabra in texto.palabras.all %}
            <li>{{ palabra.contenido }}: {{ palabra.frecuencia }}</li>
        {% endfor %}
    </ul>

    <hr>
    {% if texto.tokens_json %}
        <p><strong>Tokens (muestra):</strong>
            {{ texto.tokens_json|slice:":50"|join:", " }}
        </p>
    {% endif %}
    {% if texto.nube_imagen %}
        <div>
            <img src="{{ texto.nube_imagen.url }}" alt="Nube de palabras de {{ texto.titulo }}" style="max-width: 600px; height: auto;">
        </div>
    {% endif %}
    
{% empty %}
    <p>No hay textos todavía.</p>
{% endfor %}

</body>
</html>
